"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1162],{1162:(tn,ze,u)=>{u.d(ze,{zQ:()=>Ke});var c=u(4650),fe=u(7579),b=u(9646),he=u(9751),ge=u(8996),Ue=u(6451),w=u(5363),m=u(3900),W=u(4004),je=u(6063);class Ve extends fe.x{constructor(e=1/0,n=1/0,r=je.l){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;n||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){const s=n.now();let l=0;for(let a=1;a<r.length&&r[a]<=s;a+=2)l=a;l&&r.splice(0,l+1)}}}var Ye=u(3099);function Ae(t,e,n){let r,o=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:n}=t):r=t??1/0,(0,Ye.B)({connector:()=>new Ve(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}var Xe=u(590),Ze=u(576);function me(t,e){return(0,Ze.m)(e)?(0,m.w)(()=>t,e):(0,m.w)(()=>t)}var B=u(9468),Qe=u(9300),S=u(1157),k=u(2011),Je=u(6895);u(259);var E=u(5861),G=u(6881),Te=u(4859),y=u(2090),rt=u(1877);const z=new Map,ke={activated:!1,tokenObservers:[]},ot={initialized:!1,enabled:!1};function d(t){return z.get(t)||Object.assign({},ke)}function F(){return ot}const U="https://content-firebaseappcheck.googleapis.com/v1",lt="exchangeDebugToken",ve={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class ct{constructor(e,n,r,o,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=o,o>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return(0,E.Z)(function*(){n.stop();try{n.pending=new y.BH,yield function dt(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new y.BH,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const f=new y.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function j(t){if(!d(t).activated)throw f.create("use-before-activation",{appName:t.name})}function x(t,e){return Y.apply(this,arguments)}function Y(){return(Y=(0,E.Z)(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){const h=yield o.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let s,l;try{s=yield fetch(t,i)}catch(h){throw f.create("fetch-network-error",{originalErrorMessage:h?.message})}if(200!==s.status)throw f.create("fetch-status-error",{httpStatus:s.status});try{l=yield s.json()}catch(h){throw f.create("fetch-parse-error",{originalErrorMessage:h?.message})}const a=l.ttl.match(/^([\d.]+)(s)$/);if(!a||!a[2]||isNaN(Number(a[1])))throw f.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});const g=1e3*Number(a[1]),C=Date.now();return{token:l.token,expireTimeMillis:C+g,issuedAtTimeMillis:C}})).apply(this,arguments)}function Ce(t,e){const{projectId:n,appId:r,apiKey:o}=t.options;return{url:`${U}/projects/${n}/apps/${r}:${lt}?key=${o}`,body:{debug_token:e}}}const gt="firebase-app-check-database",At=1,P="firebase-app-check-store";let N=null;function Re(t,e){return X.apply(this,arguments)}function X(){return(X=(0,E.Z)(function*(t,e){const r=(yield function Pe(){return N||(N=new Promise((t,e)=>{try{const n=indexedDB.open(gt,At);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var o;e(f.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(P,{keyPath:"compositeKey"})}}catch(n){e(f.create("storage-open",{originalErrorMessage:n?.message}))}}),N)}()).transaction(P,"readwrite"),i=r.objectStore(P).put({compositeKey:t,value:e});return new Promise((s,l)=>{i.onsuccess=a=>{s()},r.onerror=a=>{var g;l(f.create("storage-set",{originalErrorMessage:null===(g=a.target.error)||void 0===g?void 0:g.message}))}})})).apply(this,arguments)}const R=new rt.Yd("@firebase/app-check");function J(t,e){return(0,y.hl)()?function Et(t,e){return Re(function Ie(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{R.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function ee(){return F().enabled}function te(){return ne.apply(this,arguments)}function ne(){return(ne=(0,E.Z)(function*(){const t=F();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Pt={error:"UNKNOWN_ERROR"};function Rt(t){return y.US.encodeString(JSON.stringify(t),!1)}function L(t){return re.apply(this,arguments)}function re(){return(re=(0,E.Z)(function*(t,e=!1){const n=t.app;j(n);const r=d(n);let i,o=r.token;if(o&&!v(o)&&(r.token=void 0,o=void 0),!o){const a=yield r.cachedTokenPromise;a&&(v(a)?o=a:yield J(n,void 0))}if(!e&&o&&v(o))return{token:o.token};let l,s=!1;if(ee()){r.exchangeTokenPromise||(r.exchangeTokenPromise=x(Ce(n,yield te()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);const a=yield r.exchangeTokenPromise;return yield J(n,a),r.token=a,{token:a.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),o=yield d(n).exchangeTokenPromise}catch(a){"appCheck/throttled"===a.code?R.warn(a.message):R.error(a),i=a}return o?i?l=v(o)?{token:o.token,internalError:i}:De(i):(l={token:o.token},r.token=o,yield J(n,o)):l=De(i),s&&function Se(t,e){const n=d(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(n,l),l})).apply(this,arguments)}function be(t){return oe.apply(this,arguments)}function oe(){return(oe=(0,E.Z)(function*(t){const e=t.app;j(e);const{provider:n}=d(e);if(ee()){const r=yield te(),{token:o}=yield x(Ce(e,r),t.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield n.getToken();return{token:r}}})).apply(this,arguments)}function se(t,e){const n=d(t),r=n.tokenObservers.filter(o=>o.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function we(t){const{app:e}=t,n=d(e);let r=n.tokenRefresher;r||(r=function _t(t){const{app:e}=t;return new ct((0,E.Z)(function*(){let r;if(r=d(e).token?yield L(t,!0):yield L(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=d(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},ve.RETRIAL_MIN_WAIT,ve.RETRIAL_MAX_WAIT)}(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function v(t){return t.expireTimeMillis-Date.now()>0}function De(t){return{token:Rt(Pt),error:t}}class It{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=d(this.app);for(const n of e)se(this.app,n.next);return Promise.resolve()}}const He="app-check-internal";!function Bt(){(0,G._registerComponent)(new Te.wA("app-check",t=>function bt(t,e){return new It(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(He).initialize()})),(0,G._registerComponent)(new Te.wA(He,t=>function wt(t){return{getToken:e=>L(t,e),getLimitedUseToken:()=>be(t),addTokenListener:e=>function ie(t,e,n,r){const{app:o}=t,i=d(o);if(i.tokenObservers=[...i.tokenObservers,{next:n,error:r,type:e}],i.token&&v(i.token)){const l=i.token;Promise.resolve().then(()=>{n({token:l.token}),we(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>we(t))}(t,"INTERNAL",e),removeTokenListener:e=>se(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,G.registerVersion)("@firebase/app-check","0.8.0")}();class Be{constructor(){return(0,S.vb)("app-check")}}typeof window<"u"&&window,u(9260);const Vt=new c.OlP("angularfire2.auth.use-emulator"),Yt=new c.OlP("angularfire2.auth.settings"),Xt=new c.OlP("angularfire2.auth.tenant-id"),Zt=new c.OlP("angularfire2.auth.langugage-code"),Qt=new c.OlP("angularfire2.auth.use-device-language"),Jt=new c.OlP("angularfire.auth.persistence");let Ke=(()=>{class t{constructor(n,r,o,i,s,l,a,g,C,h,en,Dn){const Ge=new fe.x,_=(0,b.of)(void 0).pipe((0,w.Q)(s.outsideAngular),(0,m.w)(()=>i.runOutsideAngular(()=>u.e(2644).then(u.bind(u,2644)))),(0,W.U)(()=>(0,k.on)(n,i,r)),(0,W.U)(I=>((t,e,n,r,o,i,s,l)=>(0,k.cc)(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const a=e.runOutsideAngular(()=>t.auth());if(n&&a.useEmulator(...n),r&&(a.tenantId=r),a.languageCode=o,i&&a.useDeviceLanguage(),s)for(const[g,C]of Object.entries(s))a.settings[g]=C;return l&&a.setPersistence(l),a},[n,r,o,i,s,l]))(I,i,l,g,C,h,a,en)),Ae({bufferSize:1,refCount:!1}));if((0,Je.PM)(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,b.of)(null);else{_.pipe((0,Xe.P)()).subscribe();const H=_.pipe((0,m.w)(p=>p.getRedirectResult().then(A=>A,()=>null)),S.iC,Ae({bufferSize:1,refCount:!1})),de=_.pipe((0,m.w)(p=>new he.y(A=>({unsubscribe:i.runOutsideAngular(()=>p.onAuthStateChanged(T=>A.next(T),T=>A.error(T),()=>A.complete()))})))),pe=_.pipe((0,m.w)(p=>new he.y(A=>({unsubscribe:i.runOutsideAngular(()=>p.onIdTokenChanged(T=>A.next(T),T=>A.error(T),()=>A.complete()))}))));this.authState=H.pipe(me(de),(0,B.R)(s.outsideAngular),(0,w.Q)(s.insideAngular)),this.user=H.pipe(me(pe),(0,B.R)(s.outsideAngular),(0,w.Q)(s.insideAngular)),this.idToken=this.user.pipe((0,m.w)(p=>p?(0,ge.D)(p.getIdToken()):(0,b.of)(null))),this.idTokenResult=this.user.pipe((0,m.w)(p=>p?(0,ge.D)(p.getIdTokenResult()):(0,b.of)(null))),this.credential=(0,Ue.T)(H,Ge,this.authState.pipe((0,Qe.h)(p=>!p))).pipe((0,W.U)(p=>p?.user?p:null),(0,B.R)(s.outsideAngular),(0,w.Q)(s.insideAngular))}return(0,k.pX)(this,_,i,{spy:{apply:(I,H,de)=>{(I.startsWith("signIn")||I.startsWith("createUser"))&&de.then(pe=>Ge.next(pe))}}})}}return t.\u0275fac=function(n){return new(n||t)(c.LFG(k.Dh),c.LFG(k.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(S.HU),c.LFG(Vt,8),c.LFG(Yt,8),c.LFG(Xt,8),c.LFG(Zt,8),c.LFG(Qt,8),c.LFG(Jt,8),c.LFG(Be,8))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})()}}]);